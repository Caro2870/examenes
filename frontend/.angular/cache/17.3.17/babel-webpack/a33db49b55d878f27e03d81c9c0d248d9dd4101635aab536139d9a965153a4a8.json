{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/comments.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/forms\";\nfunction CommentsComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r1 = i0.…µ…µgetCurrentView();\n    i0.…µ…µelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"strong\");\n    i0.…µ…µtext(3);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(4, \"span\", 8);\n    i0.…µ…µtext(5);\n    i0.…µ…µpipe(6, \"date\");\n    i0.…µ…µelementEnd()();\n    i0.…µ…µelementStart(7, \"p\");\n    i0.…µ…µtext(8);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(9, \"div\", 9)(10, \"button\", 10);\n    i0.…µ…µlistener(\"click\", function CommentsComponent_div_8_Template_button_click_10_listener() {\n      const comment_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.vote(comment_r2.id, \"positivo\"));\n    });\n    i0.…µ…µtext(11);\n    i0.…µ…µelementEnd();\n    i0.…µ…µelementStart(12, \"button\", 10);\n    i0.…µ…µlistener(\"click\", function CommentsComponent_div_8_Template_button_click_12_listener() {\n      const comment_r2 = i0.…µ…µrestoreView(_r1).$implicit;\n      const ctx_r2 = i0.…µ…µnextContext();\n      return i0.…µ…µresetView(ctx_r2.vote(comment_r2.id, \"negativo\"));\n    });\n    i0.…µ…µtext(13);\n    i0.…µ…µelementEnd()()();\n  }\n  if (rf & 2) {\n    const comment_r2 = ctx.$implicit;\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate2(\"\", comment_r2.usuario.nombre, \" \", comment_r2.usuario.apellido, \"\");\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate(i0.…µ…µpipeBind1(6, 6, comment_r2.created_at));\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate(comment_r2.texto);\n    i0.…µ…µadvance(3);\n    i0.…µ…µtextInterpolate1(\"\\uD83D\\uDC4D \", comment_r2.votos_positivos, \"\");\n    i0.…µ…µadvance(2);\n    i0.…µ…µtextInterpolate1(\"\\uD83D\\uDC4E \", comment_r2.votos_negativos, \"\");\n  }\n}\nexport class CommentsComponent {\n  commentsService;\n  preguntaId;\n  comments = [];\n  newComment = '';\n  constructor(commentsService) {\n    this.commentsService = commentsService;\n  }\n  ngOnInit() {\n    this.loadComments();\n  }\n  loadComments() {\n    this.commentsService.getComments(this.preguntaId).subscribe(data => {\n      this.comments = data;\n    });\n  }\n  addComment() {\n    if (!this.newComment.trim()) return;\n    this.commentsService.createComment({\n      pregunta_id: this.preguntaId,\n      texto: this.newComment\n    }).subscribe(() => {\n      this.newComment = '';\n      this.loadComments();\n    });\n  }\n  vote(commentId, tipo) {\n    this.commentsService.voteComment({\n      comentario_id: commentId,\n      tipo\n    }).subscribe(() => {\n      this.loadComments();\n    });\n  }\n  static …µfac = function CommentsComponent_Factory(t) {\n    return new (t || CommentsComponent)(i0.…µ…µdirectiveInject(i1.CommentsService));\n  };\n  static …µcmp = /*@__PURE__*/i0.…µ…µdefineComponent({\n    type: CommentsComponent,\n    selectors: [[\"app-comments\"]],\n    inputs: {\n      preguntaId: \"preguntaId\"\n    },\n    decls: 9,\n    vars: 2,\n    consts: [[1, \"comments-section\"], [1, \"comment-form\"], [\"placeholder\", \"Escribe un comentario...\", 3, \"ngModelChange\", \"ngModel\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"comments-list\"], [\"class\", \"comment\", 4, \"ngFor\", \"ngForOf\"], [1, \"comment\"], [1, \"comment-header\"], [1, \"date\"], [1, \"comment-actions\"], [3, \"click\"]],\n    template: function CommentsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.…µ…µelementStart(0, \"div\", 0)(1, \"h3\");\n        i0.…µ…µtext(2, \"Comentarios\");\n        i0.…µ…µelementEnd();\n        i0.…µ…µelementStart(3, \"div\", 1)(4, \"textarea\", 2);\n        i0.…µ…µtwoWayListener(\"ngModelChange\", function CommentsComponent_Template_textarea_ngModelChange_4_listener($event) {\n          i0.…µ…µtwoWayBindingSet(ctx.newComment, $event) || (ctx.newComment = $event);\n          return $event;\n        });\n        i0.…µ…µelementEnd();\n        i0.…µ…µelementStart(5, \"button\", 3);\n        i0.…µ…µlistener(\"click\", function CommentsComponent_Template_button_click_5_listener() {\n          return ctx.addComment();\n        });\n        i0.…µ…µtext(6, \"Comentar\");\n        i0.…µ…µelementEnd()();\n        i0.…µ…µelementStart(7, \"div\", 4);\n        i0.…µ…µtemplate(8, CommentsComponent_div_8_Template, 14, 8, \"div\", 5);\n        i0.…µ…µelementEnd()();\n      }\n      if (rf & 2) {\n        i0.…µ…µadvance(4);\n        i0.…µ…µtwoWayProperty(\"ngModel\", ctx.newComment);\n        i0.…µ…µadvance(4);\n        i0.…µ…µproperty(\"ngForOf\", ctx.comments);\n      }\n    },\n    dependencies: [i2.NgForOf, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel, i2.DatePipe],\n    styles: [\".comment-form[_ngcontent-%COMP%] {\\n      margin-bottom: 20px;\\n    }\\n    .comment-form[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%] {\\n      width: 100%;\\n      min-height: 80px;\\n      margin-bottom: 10px;\\n    }\\n    .comment[_ngcontent-%COMP%] {\\n      padding: 15px;\\n      border-bottom: 1px solid #eee;\\n    }\\n    .comment-header[_ngcontent-%COMP%] {\\n      display: flex;\\n      justify-content: space-between;\\n      margin-bottom: 10px;\\n    }\\n    .comment-actions[_ngcontent-%COMP%] {\\n      display: flex;\\n      gap: 10px;\\n      margin-top: 10px;\\n    }\\n  \\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvbW9kdWxlcy9jb21tZW50cy9jb21wb25lbnRzL2NvbW1lbnRzL2NvbW1lbnRzLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0lBQ0k7TUFDRSxtQkFBbUI7SUFDckI7SUFDQTtNQUNFLFdBQVc7TUFDWCxnQkFBZ0I7TUFDaEIsbUJBQW1CO0lBQ3JCO0lBQ0E7TUFDRSxhQUFhO01BQ2IsNkJBQTZCO0lBQy9CO0lBQ0E7TUFDRSxhQUFhO01BQ2IsOEJBQThCO01BQzlCLG1CQUFtQjtJQUNyQjtJQUNBO01BQ0UsYUFBYTtNQUNiLFNBQVM7TUFDVCxnQkFBZ0I7SUFDbEIiLCJzb3VyY2VzQ29udGVudCI6WyJcbiAgICAuY29tbWVudC1mb3JtIHtcbiAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgfVxuICAgIC5jb21tZW50LWZvcm0gdGV4dGFyZWEge1xuICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICBtaW4taGVpZ2h0OiA4MHB4O1xuICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDtcbiAgICB9XG4gICAgLmNvbW1lbnQge1xuICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlO1xuICAgIH1cbiAgICAuY29tbWVudC1oZWFkZXIge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7XG4gICAgfVxuICAgIC5jb21tZW50LWFjdGlvbnMge1xuICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgIGdhcDogMTBweDtcbiAgICAgIG1hcmdpbi10b3A6IDEwcHg7XG4gICAgfVxuICAiXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["i0","…µ…µelementStart","…µ…µtext","…µ…µelementEnd","…µ…µlistener","CommentsComponent_div_8_Template_button_click_10_listener","comment_r2","…µ…µrestoreView","_r1","$implicit","ctx_r2","…µ…µnextContext","…µ…µresetView","vote","id","CommentsComponent_div_8_Template_button_click_12_listener","…µ…µadvance","…µ…µtextInterpolate2","usuario","nombre","apellido","…µ…µtextInterpolate","…µ…µpipeBind1","created_at","texto","…µ…µtextInterpolate1","votos_positivos","votos_negativos","CommentsComponent","commentsService","preguntaId","comments","newComment","constructor","ngOnInit","loadComments","getComments","subscribe","data","addComment","trim","createComment","pregunta_id","commentId","tipo","voteComment","comentario_id","…µ…µdirectiveInject","i1","CommentsService","selectors","inputs","decls","vars","consts","template","CommentsComponent_Template","rf","ctx","…µ…µtwoWayListener","CommentsComponent_Template_textarea_ngModelChange_4_listener","$event","…µ…µtwoWayBindingSet","CommentsComponent_Template_button_click_5_listener","…µ…µtemplate","CommentsComponent_div_8_Template","…µ…µtwoWayProperty","…µ…µproperty"],"sources":["/app/src/app/modules/comments/components/comments/comments.component.ts"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\nimport { CommentsService } from '../../services/comments.service';\n\n@Component({\n  selector: 'app-comments',\n  template: `\n    <div class=\"comments-section\">\n      <h3>Comentarios</h3>\n      <div class=\"comment-form\">\n        <textarea [(ngModel)]=\"newComment\" placeholder=\"Escribe un comentario...\"></textarea>\n        <button class=\"btn btn-primary\" (click)=\"addComment()\">Comentar</button>\n      </div>\n      <div class=\"comments-list\">\n        <div *ngFor=\"let comment of comments\" class=\"comment\">\n          <div class=\"comment-header\">\n            <strong>{{ comment.usuario.nombre }} {{ comment.usuario.apellido }}</strong>\n            <span class=\"date\">{{ comment.created_at | date }}</span>\n          </div>\n          <p>{{ comment.texto }}</p>\n          <div class=\"comment-actions\">\n            <button (click)=\"vote(comment.id, 'positivo')\">üëç {{ comment.votos_positivos }}</button>\n            <button (click)=\"vote(comment.id, 'negativo')\">üëé {{ comment.votos_negativos }}</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n  styles: [`\n    .comment-form {\n      margin-bottom: 20px;\n    }\n    .comment-form textarea {\n      width: 100%;\n      min-height: 80px;\n      margin-bottom: 10px;\n    }\n    .comment {\n      padding: 15px;\n      border-bottom: 1px solid #eee;\n    }\n    .comment-header {\n      display: flex;\n      justify-content: space-between;\n      margin-bottom: 10px;\n    }\n    .comment-actions {\n      display: flex;\n      gap: 10px;\n      margin-top: 10px;\n    }\n  `],\n})\nexport class CommentsComponent implements OnInit {\n  @Input() preguntaId!: number;\n  comments: any[] = [];\n  newComment = '';\n\n  constructor(private commentsService: CommentsService) {}\n\n  ngOnInit() {\n    this.loadComments();\n  }\n\n  loadComments() {\n    this.commentsService.getComments(this.preguntaId).subscribe((data: any) => {\n      this.comments = data;\n    });\n  }\n\n  addComment() {\n    if (!this.newComment.trim()) return;\n    this.commentsService.createComment({\n      pregunta_id: this.preguntaId,\n      texto: this.newComment,\n    }).subscribe(() => {\n      this.newComment = '';\n      this.loadComments();\n    });\n  }\n\n  vote(commentId: number, tipo: string) {\n    this.commentsService.voteComment({\n      comentario_id: commentId,\n      tipo,\n    }).subscribe(() => {\n      this.loadComments();\n    });\n  }\n}\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}