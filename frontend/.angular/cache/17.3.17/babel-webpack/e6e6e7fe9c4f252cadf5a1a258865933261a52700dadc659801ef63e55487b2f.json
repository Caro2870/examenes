{"ast":null,"code":"import { throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../services/auth.service\";\nexport class ErrorInterceptor {\n  router;\n  authService;\n  constructor(router, authService) {\n    this.router = router;\n    this.authService = authService;\n  }\n  intercept(request, next) {\n    return next.handle(request).pipe(catchError(error => {\n      if (error.status === 401) {\n        this.authService.logout();\n        this.router.navigate(['/auth/login']);\n      } else if (error.status === 403) {\n        // Límite alcanzado o sin permisos\n        const message = error.error?.message || 'No tienes permisos para esta acción';\n        alert(message);\n      }\n      return throwError(() => error);\n    }));\n  }\n  static ɵfac = function ErrorInterceptor_Factory(t) {\n    return new (t || ErrorInterceptor)(i0.ɵɵinject(i1.Router), i0.ɵɵinject(i2.AuthService));\n  };\n  static ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: ErrorInterceptor,\n    factory: ErrorInterceptor.ɵfac\n  });\n}","map":{"version":3,"names":["throwError","catchError","ErrorInterceptor","router","authService","constructor","intercept","request","next","handle","pipe","error","status","logout","navigate","message","alert","i0","ɵɵinject","i1","Router","i2","AuthService","factory","ɵfac"],"sources":["/app/src/app/core/interceptors/error.interceptor.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpInterceptor, HttpRequest, HttpHandler, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { Router } from '@angular/router';\nimport { AuthService } from '../services/auth.service';\n\n@Injectable()\nexport class ErrorInterceptor implements HttpInterceptor {\n  constructor(private router: Router, private authService: AuthService) {}\n\n  intercept(request: HttpRequest<any>, next: HttpHandler): Observable<any> {\n    return next.handle(request).pipe(\n      catchError((error: HttpErrorResponse) => {\n        if (error.status === 401) {\n          this.authService.logout();\n          this.router.navigate(['/auth/login']);\n        } else if (error.status === 403) {\n          // Límite alcanzado o sin permisos\n          const message = error.error?.message || 'No tienes permisos para esta acción';\n          alert(message);\n        }\n\n        return throwError(() => error);\n      }),\n    );\n  }\n}\n\n"],"mappings":"AAEA,SAAqBA,UAAU,QAAQ,MAAM;AAC7C,SAASC,UAAU,QAAQ,gBAAgB;;;;AAK3C,OAAM,MAAOC,gBAAgB;EACPC,MAAA;EAAwBC,WAAA;EAA5CC,YAAoBF,MAAc,EAAUC,WAAwB;IAAhD,KAAAD,MAAM,GAANA,MAAM;IAAkB,KAAAC,WAAW,GAAXA,WAAW;EAAgB;EAEvEE,SAASA,CAACC,OAAyB,EAAEC,IAAiB;IACpD,OAAOA,IAAI,CAACC,MAAM,CAACF,OAAO,CAAC,CAACG,IAAI,CAC9BT,UAAU,CAAEU,KAAwB,IAAI;MACtC,IAAIA,KAAK,CAACC,MAAM,KAAK,GAAG,EAAE;QACxB,IAAI,CAACR,WAAW,CAACS,MAAM,EAAE;QACzB,IAAI,CAACV,MAAM,CAACW,QAAQ,CAAC,CAAC,aAAa,CAAC,CAAC;OACtC,MAAM,IAAIH,KAAK,CAACC,MAAM,KAAK,GAAG,EAAE;QAC/B;QACA,MAAMG,OAAO,GAAGJ,KAAK,CAACA,KAAK,EAAEI,OAAO,IAAI,qCAAqC;QAC7EC,KAAK,CAACD,OAAO,CAAC;;MAGhB,OAAOf,UAAU,CAAC,MAAMW,KAAK,CAAC;IAChC,CAAC,CAAC,CACH;EACH;;qBAlBWT,gBAAgB,EAAAe,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,MAAA,GAAAH,EAAA,CAAAC,QAAA,CAAAG,EAAA,CAAAC,WAAA;EAAA;;WAAhBpB,gBAAgB;IAAAqB,OAAA,EAAhBrB,gBAAgB,CAAAsB;EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}