{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet AdminComponent = class AdminComponent {\n  adminService;\n  questionsService;\n  activeTab = 'questions';\n  pendingQuestions = [];\n  categorias = [];\n  niveles = [];\n  dificultades = [];\n  generateData = {\n    categoria_id: null,\n    nivel_id: null,\n    dificultad_id: null\n  };\n  manualQuestion = {\n    texto: '',\n    explicacion: '',\n    categoria_id: null,\n    nivel_id: null,\n    dificultad_id: null,\n    opciones: [{\n      texto: '',\n      es_correcta: false\n    }, {\n      texto: '',\n      es_correcta: false\n    }, {\n      texto: '',\n      es_correcta: false\n    }, {\n      texto: '',\n      es_correcta: false\n    }]\n  };\n  selectedFile = null;\n  constructor(adminService, questionsService) {\n    this.adminService = adminService;\n    this.questionsService = questionsService;\n  }\n  ngOnInit() {\n    this.loadPendingQuestions();\n    this.loadCategories();\n    this.loadNiveles();\n    this.loadDificultades();\n  }\n  loadPendingQuestions() {\n    this.adminService.getPendingQuestions().subscribe(data => {\n      this.pendingQuestions = data;\n    });\n  }\n  loadCategories() {\n    this.adminService.getCategories().subscribe(data => {\n      this.categorias = data;\n    });\n  }\n  loadNiveles() {\n    this.questionsService.getNiveles().subscribe(data => {\n      this.niveles = data;\n    });\n  }\n  loadDificultades() {\n    this.questionsService.getDificultades().subscribe(data => {\n      this.dificultades = data;\n    });\n  }\n  approve(id) {\n    this.adminService.approveQuestion(id).subscribe(() => {\n      this.loadPendingQuestions();\n    });\n  }\n  reject(id) {\n    this.adminService.rejectQuestion(id).subscribe(() => {\n      this.loadPendingQuestions();\n    });\n  }\n  generateQuestion() {\n    if (!this.generateData.categoria_id || !this.generateData.nivel_id || !this.generateData.dificultad_id) {\n      alert('Por favor completa todos los campos');\n      return;\n    }\n    this.adminService.generateQuestion(this.generateData).subscribe({\n      next: () => {\n        alert('Pregunta generada exitosamente');\n        this.loadPendingQuestions();\n        this.generateData = {\n          categoria_id: null,\n          nivel_id: null,\n          dificultad_id: null\n        };\n      },\n      error: err => {\n        alert(err.error?.message || 'Error al generar pregunta');\n      }\n    });\n  }\n  addOption() {\n    this.manualQuestion.opciones.push({\n      texto: '',\n      es_correcta: false\n    });\n  }\n  removeOption(index) {\n    if (this.manualQuestion.opciones.length > 2) {\n      this.manualQuestion.opciones.splice(index, 1);\n    }\n  }\n  createManualQuestion() {\n    const correctas = this.manualQuestion.opciones.filter(op => op.es_correcta);\n    if (correctas.length !== 1) {\n      alert('Debe haber exactamente una opción correcta');\n      return;\n    }\n    if (!this.manualQuestion.texto || !this.manualQuestion.categoria_id || !this.manualQuestion.nivel_id || !this.manualQuestion.dificultad_id) {\n      alert('Por favor completa todos los campos obligatorios');\n      return;\n    }\n    this.adminService.createQuestion(this.manualQuestion).subscribe({\n      next: () => {\n        alert('Pregunta creada exitosamente');\n        this.manualQuestion = {\n          texto: '',\n          explicacion: '',\n          categoria_id: null,\n          nivel_id: null,\n          dificultad_id: null,\n          opciones: [{\n            texto: '',\n            es_correcta: false\n          }, {\n            texto: '',\n            es_correcta: false\n          }, {\n            texto: '',\n            es_correcta: false\n          }, {\n            texto: '',\n            es_correcta: false\n          }]\n        };\n      },\n      error: err => {\n        alert(err.error?.message || 'Error al crear pregunta');\n      }\n    });\n  }\n  onFileSelected(event) {\n    this.selectedFile = event.target.files[0];\n  }\n  uploadExcel() {\n    if (!this.selectedFile) {\n      alert('Por favor selecciona un archivo');\n      return;\n    }\n    this.adminService.uploadExcel(this.selectedFile).subscribe({\n      next: response => {\n        alert(`Archivo procesado: ${response.message || 'Éxito'}`);\n        this.selectedFile = null;\n        this.loadPendingQuestions();\n      },\n      error: err => {\n        alert(err.error?.message || 'Error al procesar archivo');\n      }\n    });\n  }\n};\nAdminComponent = __decorate([Component({\n  selector: 'app-admin',\n  templateUrl: 'admin.component.html',\n  styleUrls: []\n})], AdminComponent);\nexport { AdminComponent };","map":{"version":3,"names":["Component","AdminComponent","adminService","questionsService","activeTab","pendingQuestions","categorias","niveles","dificultades","generateData","categoria_id","nivel_id","dificultad_id","manualQuestion","texto","explicacion","opciones","es_correcta","selectedFile","constructor","ngOnInit","loadPendingQuestions","loadCategories","loadNiveles","loadDificultades","getPendingQuestions","subscribe","data","getCategories","getNiveles","getDificultades","approve","id","approveQuestion","reject","rejectQuestion","generateQuestion","alert","next","error","err","message","addOption","push","removeOption","index","length","splice","createManualQuestion","correctas","filter","op","createQuestion","onFileSelected","event","target","files","uploadExcel","response","__decorate","selector","templateUrl","styleUrls"],"sources":["/app/src/app/modules/admin/components/admin/admin.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { AdminService } from '../../services/admin.service';\nimport { QuestionsService } from '../../../question-bank/services/questions.service';\n\n@Component({\n  selector: 'app-admin',\n  templateUrl: 'admin.component.html',\n  styleUrls: [],\n})\nexport class AdminComponent implements OnInit {\n  activeTab = 'questions';\n  pendingQuestions: any[] = [];\n  categorias: any[] = [];\n  niveles: any[] = [];\n  dificultades: any[] = [];\n  generateData: any = {\n    categoria_id: null,\n    nivel_id: null,\n    dificultad_id: null,\n  };\n  manualQuestion: any = {\n    texto: '',\n    explicacion: '',\n    categoria_id: null,\n    nivel_id: null,\n    dificultad_id: null,\n    opciones: [\n      { texto: '', es_correcta: false },\n      { texto: '', es_correcta: false },\n      { texto: '', es_correcta: false },\n      { texto: '', es_correcta: false },\n    ],\n  };\n  selectedFile: File | null = null;\n\n  constructor(\n    private adminService: AdminService,\n    private questionsService: QuestionsService,\n  ) {}\n\n  ngOnInit() {\n    this.loadPendingQuestions();\n    this.loadCategories();\n    this.loadNiveles();\n    this.loadDificultades();\n  }\n\n  loadPendingQuestions() {\n    this.adminService.getPendingQuestions().subscribe((data: any) => {\n      this.pendingQuestions = data;\n    });\n  }\n\n  loadCategories() {\n    this.adminService.getCategories().subscribe((data: any) => {\n      this.categorias = data;\n    });\n  }\n\n  loadNiveles() {\n    this.questionsService.getNiveles().subscribe((data: any) => {\n      this.niveles = data;\n    });\n  }\n\n  loadDificultades() {\n    this.questionsService.getDificultades().subscribe((data: any) => {\n      this.dificultades = data;\n    });\n  }\n\n  approve(id: number) {\n    this.adminService.approveQuestion(id).subscribe(() => {\n      this.loadPendingQuestions();\n    });\n  }\n\n  reject(id: number) {\n    this.adminService.rejectQuestion(id).subscribe(() => {\n      this.loadPendingQuestions();\n    });\n  }\n\n  generateQuestion() {\n    if (!this.generateData.categoria_id || !this.generateData.nivel_id || !this.generateData.dificultad_id) {\n      alert('Por favor completa todos los campos');\n      return;\n    }\n    this.adminService.generateQuestion(this.generateData).subscribe({\n      next: () => {\n        alert('Pregunta generada exitosamente');\n        this.loadPendingQuestions();\n        this.generateData = {\n          categoria_id: null,\n          nivel_id: null,\n          dificultad_id: null,\n        };\n      },\n      error: (err) => {\n        alert(err.error?.message || 'Error al generar pregunta');\n      },\n    });\n  }\n\n  addOption() {\n    this.manualQuestion.opciones.push({ texto: '', es_correcta: false });\n  }\n\n  removeOption(index: number) {\n    if (this.manualQuestion.opciones.length > 2) {\n      this.manualQuestion.opciones.splice(index, 1);\n    }\n  }\n\n  createManualQuestion() {\n    const correctas = this.manualQuestion.opciones.filter((op: any) => op.es_correcta);\n    if (correctas.length !== 1) {\n      alert('Debe haber exactamente una opción correcta');\n      return;\n    }\n\n    if (!this.manualQuestion.texto || !this.manualQuestion.categoria_id || \n        !this.manualQuestion.nivel_id || !this.manualQuestion.dificultad_id) {\n      alert('Por favor completa todos los campos obligatorios');\n      return;\n    }\n\n    this.adminService.createQuestion(this.manualQuestion).subscribe({\n      next: () => {\n        alert('Pregunta creada exitosamente');\n        this.manualQuestion = {\n          texto: '',\n          explicacion: '',\n          categoria_id: null,\n          nivel_id: null,\n          dificultad_id: null,\n          opciones: [\n            { texto: '', es_correcta: false },\n            { texto: '', es_correcta: false },\n            { texto: '', es_correcta: false },\n            { texto: '', es_correcta: false },\n          ],\n        };\n      },\n      error: (err) => {\n        alert(err.error?.message || 'Error al crear pregunta');\n      },\n    });\n  }\n\n  onFileSelected(event: any) {\n    this.selectedFile = event.target.files[0];\n  }\n\n  uploadExcel() {\n    if (!this.selectedFile) {\n      alert('Por favor selecciona un archivo');\n      return;\n    }\n\n    this.adminService.uploadExcel(this.selectedFile).subscribe({\n      next: (response) => {\n        alert(`Archivo procesado: ${response.message || 'Éxito'}`);\n        this.selectedFile = null;\n        this.loadPendingQuestions();\n      },\n      error: (err) => {\n        alert(err.error?.message || 'Error al procesar archivo');\n      },\n    });\n  }\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}